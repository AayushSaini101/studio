name: Deploy to Production

on:
  push:
    branches:
      - master

jobs:
  deploy:
    runs-on: ubuntu-18.04
    steps:
      - name: Checkout
        uses: actions/checkout@v1
        with:
          fetch-depth: 0
      - name: Deploy the application
        uses: landmaj/github-action-dokku@master
        with:
          PRIVATE_KEY: ${{ secrets.PROD_PRIVATE_DEPLOY_KEY }}
          PUBLIC_KEY: ${{ secrets.PROD_PUBLIC_DEPLOY_KEY }}
          HOST: 'hub.asyncapi.io'
          PROJECT: app
