# Migration `20200513161100-default-feature-flags-as-empty-object`

This migration has been generated by fmvilas at 5/13/2020, 4:11:00 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."organizations" ALTER COLUMN "feature_flags" SET DEFAULT '{}';

ALTER TABLE "public"."users" ALTER COLUMN "feature_flags" SET DEFAULT '{}',
ALTER COLUMN "plugin_data" SET DEFAULT '{}';
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200513160943-add-plugin-data..20200513161100-default-feature-flags-as-empty-object
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model apis {
   asyncapi          String
@@ -34,9 +34,9 @@
 }
 model organizations {
   createdAt                   DateTime?             @default(now()) @map(name: "created_at")
-  featureFlags                Json?                 @map(name: "feature_flags")
+  featureFlags                Json?                 @default("'{}'") @map(name: "feature_flags")
   id                          Int                   @default(autoincrement()) @id
   name                        String
   creatorId                   Int                   @map(name: "creator_id")
   planName                    String?               @default("free") @map(name: "plan_name")
@@ -75,9 +75,9 @@
   company              String?
   createdAt            DateTime?             @default(now()) @map(name: "created_at")
   displayName          String                @map(name: "display_name")
   email                String                @unique
-  featureFlags         Json?                 @map(name: "feature_flags")
+  featureFlags         Json?                 @default("'{}'") @map(name: "feature_flags")
   id                   Int                   @default(autoincrement()) @id
   username             String                @unique
   planName             String?               @default("free") @map(name: "plan_name")
   pluginData           Json?                 @default("'{}'") @map(name: "plugin_data")
```


